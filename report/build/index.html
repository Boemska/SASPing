<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SASPing Report</title>
    <style>html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}body{margin:0;padding:20px;background-color:#2f2f2f;color:#91959e}.c-heading{padding:1em 0 .5em}.c-heading,.c-heading__sub{margin:0;font-weight:400}.c-card+.c-card,.c-card--menu{margin:.5em 0 0}.c-heading__sub{padding:0;font-size:.8em;opacity:.6}h1.c-heading{font-size:2em}h2.c-heading{font-size:1.5em}h3.c-heading{font-size:1.17em}h4.c-heading{font-size:1em}h5.c-heading{font-size:.83em}h6.c-heading{font-size:.67em}.c-card{padding:0;list-style:none;display:block;border-radius:4px;background-color:#fff;box-shadow:0 0 1px rgba(17,17,17,.6);overflow:hidden}.c-card>.o-image:not(:first-child){padding:1em 0 0}.c-card__header{padding:.5em .5em 0}.c-card__header .c-heading,.c-card__item+.c-card__footer--block{padding:0}.c-card__body,.c-card__footer,.c-card__item{padding:.5em}.c-card__footer--block{padding:.5em 0 0}.c-card__footer--block .c-input-group .c-button:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.c-card__footer--block .c-input-group .c-button:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.gauge,.gauge .circle{border-radius:100%;text-align:center}.c-card__item:not(:last-child){border-bottom:1px solid rgba(202,212,216,.5)}.c-card--accordion label.c-card__item{display:block;position:relative;width:100%;padding-left:2em;cursor:pointer}.c-card--accordion label.c-card__item:before{position:absolute;left:.75em;content:"+"}.gauge,.gauge .circle,.gauge .prec{position:relative}.c-card--accordion>input,.c-card--accordion>input+.c-card__item+.c-card__item{display:none}.c-card--accordion>input:checked+.c-card__item+.c-card__item,.c-card--menu{display:block}.c-card--accordion>input:checked+.c-card__item:before{transform:rotate(45deg)}.c-card--menu{width:100%;max-height:280px;z-index:100;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}.c-card--grouped .c-card__item:not(:last-child){border-bottom:0}.c-card__divider{height:1px;background-color:#96a8b2;overflow:hidden}.c-card__item--divider{background-color:#96a8b2;color:#fff;font-weight:700}.c-card__item--brand{background-color:#2c3e50;color:#fff}.c-card__item--info{background-color:#2196f3;color:#fff}.c-card__item--warning{background-color:#ff9800;color:#fff}.c-card__item--success{background-color:#4caf50;color:#fff}.c-card__item--error{background-color:#f44336;color:#fff}.c-card__item--disabled{cursor:not-allowed;opacity:.6}.c-card--accordion label.c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover,.c-card--menu .c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover{background-color:#e5eaec;cursor:pointer}.c-card--accordion label.c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover.c-card__item--brand,.c-card--menu .c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover.c-card__item--brand{background-color:#3c556e}.c-card--accordion label.c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover.c-card__item--info,.c-card--menu .c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover.c-card__item--info{background-color:#4dabf5}.c-card--accordion label.c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover.c-card__item--warning,.c-card--menu .c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover.c-card__item--warning{background-color:#ffab2e}.c-card--accordion label.c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover.c-card__item--success,.c-card--menu .c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover.c-card__item--success{background-color:#6abe6e}.c-card--accordion label.c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover.c-card__item--error,.c-card--menu .c-card__item:not(.c-card__item--disabled):not(.c-card__item--divider):hover.c-card__item--error{background-color:#f66c62}.c-card--accordion>input:checked+.c-card__item,.c-card__item--active{background-color:rgba(202,212,216,.5);font-weight:700}.c-card--accordion>input:checked+.c-card__item.c-card__item--brand,.c-card__item--active.c-card__item--brand{background-color:#1c2732}.c-card--accordion>input:checked+.c-card__item.c-card__item--info,.c-card__item--active.c-card__item--info{background-color:#0c7fda}.c-card--accordion>input:checked+.c-card__item.c-card__item--warning,.c-card__item--active.c-card__item--warning{background-color:#d17d00}.c-card--accordion>input:checked+.c-card__item.c-card__item--success,.c-card__item--active.c-card__item--success{background-color:#3e8f41}.c-card--accordion>input:checked+.c-card__item.c-card__item--error,.c-card__item--active.c-card__item--error{background-color:#ef1d0d}#content .row{display:flex;justify-content:center}#content .row .row-content{max-width:984px;flex-grow:1;display:flex}#content .row .row-content>*{flex:1}#content p.desc{margin:0;padding:3px}#content p.desc.small{font-size:12px;line-height:16px}#content h1,#content h2,#content h3{padding:0;margin:0}#content #time-nav{margin-bottom:40px;align-items:center}#content #time-nav #time-btns{flex-grow:1;display:flex;justify-content:flex-end}#content #time-nav #time-btns>*{cursor:pointer;margin-left:20px}#content #time-nav #time-btns>.active{cursor:default;color:#faad39}#content #main-chart{height:200px}#content .center-vert,#content .col{justify-content:center;display:flex;flex-direction:column}#content #succ-req .gauge{margin-bottom:3px}.gauge{width:110px;height:110px;background-color:#faad39;background-image:linear-gradient(91deg,transparent 50%,#91959e 50%),linear-gradient(90deg,#91959e 50%,transparent 50%)}.gauge .prec{top:30px;font-size:30px}.gauge .circle{top:5px;left:5px;width:100px;height:100px;background-color:#2f2f2f}.center-text{text-align:center}.center-table{display:table;margin-left:auto;margin-right:auto}.card{background-color:#343434;box-shadow:1px 1px 3px rgba(0,0,0,.6);margin:5px;padding:10px}@media (max-width:1024px){#content .row .row-content.sm-block{display:block}#content #time-nav>div:first-child{text-align:center;margin-bottom:20px}}</style>
    <!-- python inserted data -->
    <!-- data -->
    <script charset="utf-8" type="text/javascript">function setGauge(e,t){var n=0,r=setInterval(function(){try{n++,e.querySelector(".prec").innerHTML=n+"%";var a=360*n/100;e.style["background-image"]="linear-gradient("+(a<=180?a+90:a-90)+"deg, transparent 50%, "+(a<=180?fontCol:mainCol)+" 50%),linear-gradient(90deg, "+fontCol+" 50%, transparent 50%)",n>=t&&clearInterval(r)}catch(e){throw clearInterval(r),e}},10)}function updateData(e,t){var n,r,a=document.querySelector("#time-period");switch(t){case"day":case"week":n=new Date,r=new Date,r.setDate(n.getDate()-7);break;case"month":n=new Date,r=new Date,r.setMonth(n.getMonth()-1);break;case"all":n=new Date,r=new Date,r.setYear(n.getYear()-100);break;default:n=new Date,r=new Date,r.setDate(n.getDate()-1)}a.innerHTML=r.toLocaleString(navigator.language)+" - "+n.toLocaleString(navigator.language),e&&(document.querySelectorAll(".time-btn").forEach(function(e){e.classList.remove("active")}),e.classList.add("active"));var o=data.filter(function(e){return e[5]>r.getTime()/1e3&&e[5]<n.getTime()/1e3}),l=function(e,t,n,r){return e+t/r.length},c=function(e){return Number(e[6].replace(" seconds",""))},u=o.filter(function(e){return"success"===e[1]}).length,i=o.filter(function(e){return 1===e[7]}),s=o.filter(function(e){return 0===e[7]});document.querySelector("#total-reqs").innerHTML=o.length,setGauge(document.querySelector("#succ-req .gauge"),100*(u/o.length).toFixed(2)),document.querySelector("#avg-req-time").innerHTML=100*o.map(c).reduce(l,0).toFixed(2)+"ms",document.querySelector("#avg-login-req-time").innerHTML=0===i.length?"-":100*i.map(c).reduce(l,0).toFixed(2)+"ms",document.querySelector("#avg-wologin-req-time").innerHTML=0===s.length?"-":100*s.map(c).reduce(l,0).toFixed(2)+"ms",document.querySelector("#validation-errors").innerHTML=o.filter(function(e){return"fail"===e[1]&&null!==e[2]}).length||"-",document.querySelector("#req-errors").innerHTML=o.filter(function(e){return"fail"===e[1]&&null===e[2]}).length||"-"}var fontCol="#91959e",mainCol="#faad39";document.addEventListener("DOMContentLoaded",function(){updateData()});var data=[[1,"fail","cantContain","<title>(Stored Process Error|SASStoredProcess)</title>[\\s\\S]*<h2>.*not a valid stored process path.</h2>",null,1481759319.424848,"1.991 seconds",1],["test 2","fail","mustContain",'"usermessage" : "blank"',null,1482450821.47054,"0.055 seconds",0],["bad url test","fail",null,null,"No connection adapters were found for 'htt://bad.com'",1482450821.47054,"0.002 seconds",0],["successful request","success",null,null,null,1482759704.265322,"0.706 seconds",0]];</script>
  </head>
  <body>
    <div id="content">
      <div class="row">
        <div id="time-nav" class="row-content sm-block">
          <div>
            <h1 class="c-heading">SASPing Activity</h1>
            <p id="time-period" class="desc">date</p>
          </div>
          <div id="time-btns">
            <h3 onclick="updateData(this, 'all')" class="c-heading time-btn">All Time</h3>
            <h3 onclick="updateData(this, 'month')" class="c-heading time-btn">Last Month</h3>
            <h3 onclick="updateData(this, 'week')" class="c-heading time-btn">Last Week</h3>
            <h3 onclick="updateData(this, 'day')" class="c-heading time-btn active">Today</h3>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="row-content">
          <div id="main-chart" class="card">
            Highcharts chart
          </div>
        </div>
      </div>

      <div class="row">
        <div class="row-content sm-block">
          <div class="card row-content">
            <div class="center-vert">
              <h2 id="total-reqs" class="big-val center-text">-</h2>
              <p class="desc center-text">Total requests</p>
            </div>
            <div id="succ-req">
              <div class="gauge center-table">
                <div class="circle">
                  <span class="prec">0-</span>
                </div>
              </div>
              <p class="desc center-text">Successful requests</p>
            </div>
          </div>
          <div class="col">
            <div class="card row-content">
              <div>
                <h2 id="avg-req-time" class="big-val center-text">-</h2>
                <p class="desc center-text">Average time</p>
              </div>
              <div>
                <h2 id="avg-login-req-time" class="big-val center-text">-</h2>
                <p class="desc center-text">Average time with login</p>
              </div>
              <div>
                <h2 id="avg-wologin-req-time" class="big-val center-text">-</h2>
                <p class="desc center-text">Average time w/o login</p>
              </div>
            </div>
            <div class="card row-content">
              <div>
                <h2 id="validation-errors" class="big-val center-text">-</h2>
                <p class="desc center-text">Validation errors</p>
              </div>
              <div>
                <h2 id="req-errors" class="big-val center-text">-</h2>
                <p class="desc center-text">Request errors</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

